{"version":3,"sources":["webpack://DrawNotes/webpack/bootstrap","webpack://DrawNotes/./src/pens/pen.js","webpack://DrawNotes/./src/pens/index.js","webpack://DrawNotes/./src/draw-notes.js","webpack://DrawNotes/./src/toolbar.js","webpack://DrawNotes/./src/pens/selector-pen.js","webpack://DrawNotes/./src/pens/eraser-pen.js","webpack://DrawNotes/./src/pens/stylus-pen.js","webpack://DrawNotes/./src/drawing-pad.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","PenType","freeze","eraser","pen","selector","PRIMARY_BUTTON","SECUNDARY_BUTTON","ERASER_BUTTON","Pen","penType","icon","size","color","bgColor","this","event","context","Error","SelectorPen","EraserPen","StylusPen","Initial","Eraser","Selection","Pens","InitialPen","SelectionPen","Toolbar","DrawingPad","toolbar","pad","init","selectedPen","selectedDiv","undefined","forEach","div","document","createElement","appendChild","img","onclick","classList","remove","add","setSelectedPen","src","style","backgroundColor","textContent","onPenSelected","super","type","polyline","buttons","handlePenEvent","element","elementFromPoint","x","y","parentElement","btnPressed","createNewPolyline","target","linePoints","push","offsetX","offsetY","setAttribute","map","v","join","endPolyline","eventTypes","eventListeners","currentPen","getSelectedPen","previousPen","registerListeners","setCurrentPen","eventType","eventListener","handleEvents","addEventListener","removeEventListener","pointerType","stopPropagation","console","log","tagName","createElementNS"],"mappings":"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","file":"draw-notes.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","const PRIMARY_BUTTON = 1;\r\nconst SECUNDARY_BUTTON = 2;\r\nconst ERASER_BUTTON = 32;\r\n\r\nconst PenType = Object.freeze({\r\n    eraser: 'eraser',\r\n    pen: 'pen',\r\n    selector: 'selector'\r\n});\r\n\r\nclass Pen {\r\n    constructor(penType, name, icon, size = undefined, color = undefined, bgColor = \"black\") {\r\n        this.penType = penType;\r\n        this.name = name;\r\n        this.icon = icon;\r\n        this.size = size;\r\n        this.color = color;\r\n        this.bgColor = bgColor;\r\n    }\r\n\r\n    handleEvents(event, context) {\r\n        throw new Error(\"Must be overridden\");\r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n    PRIMARY_BUTTON: PRIMARY_BUTTON,\r\n    SECUNDARY_BUTTON: SECUNDARY_BUTTON,\r\n    ERASER_BUTTON: ERASER_BUTTON,\r\n\r\n    PenType: PenType,\r\n\r\n    Pen: Pen\r\n};","const SelectorPen = require('./selector-pen');\r\nconst EraserPen = require('./eraser-pen');\r\nconst StylusPen = require('./stylus-pen');\r\n\r\nconst Initial = new StylusPen(\"black pen\", \"create.svg\", 2, \"black\", \"white\");\r\nconst Eraser = new EraserPen(\"eraser\", \"delete.svg\");\r\nconst Selection = new SelectorPen(\"select\", \"select.svg\", 2, \"gray\");\r\n\r\nconst Pens = [\r\n    Selection,\r\n    EraserPen,\r\n    Initial,\r\n    new StylusPen(\"white pen\", \"create.svg\", 2, \"white\"),\r\n    new StylusPen(\"green pen\", \"create.svg\", 2, \"green\"),\r\n    new StylusPen(\"red pen\", \"create.svg\", 2, \"red\"),\r\n    new StylusPen(\"blue pen\", \"create.svg\", 2, \"blue\", \"white\")\r\n];\r\n\r\nmodule.exports = {\r\n    InitialPen: Initial,\r\n    EraserPen: Eraser,\r\n    SelectionPen: Selection,\r\n\r\n    Pens: Pens\r\n};","const Toolbar = require('./toolbar');\r\nconst DrawingPad = require('./drawing-pad');\r\n\r\n\r\nclass DrawNotes {\r\n    constructor(toolbar, pad) {\r\n        this.toolbar = new Toolbar(toolbar);\r\n        this.pad = new DrawingPad(this.toolbar, pad);\r\n    }\r\n\r\n    init() {\r\n        this.toolbar.init();\r\n        this.pad.init();\r\n    }\r\n}\r\n\r\nmodule.exports = DrawNotes;","const { InitialPen, Pens} = require('./pens/index');\r\n\r\nclass Toolbar {\r\n    constructor(toolbar) {\r\n        this.toolbar = toolbar;\r\n        this.selectedPen = InitialPen;\r\n        this.selectedDiv = undefined;\r\n    }\r\n\r\n    init() {\r\n        Pens.forEach(pen => {\r\n            let div = document.createElement(\"div\");\r\n            this.toolbar.appendChild(div);\r\n\r\n            let img = document.createElement(\"img\");\r\n            div.appendChild(img);\r\n\r\n            let p = document.createElement(\"p\");\r\n            div.appendChild(p);\r\n\r\n            div.onclick = (event) => {\r\n                this.selectedDiv.classList.remove(\"selected-pen\");\r\n                this.selectedDiv = div;\r\n                div.classList.add(\"selected-pen\");\r\n                this.setSelectedPen(pen);\r\n            }\r\n\r\n            if (pen === this.selectedPen) {\r\n                this.selectedDiv = div;\r\n                div.classList.add(\"selected-pen\");\r\n            }\r\n\r\n            // set properties\r\n            img.src = \"icon/\" + pen.icon;\r\n            div.classList.add(\"pen\");\r\n            p.style.backgroundColor = pen.color;\r\n            p.style.color = pen.bgColor;\r\n            p.textContent = pen.name;\r\n        });\r\n    }\r\n\r\n    getSelectedPen() {\r\n        return this.selectedPen;\r\n    }\r\n\r\n    setSelectedPen(pen) {\r\n        this.selectedPen = pen;\r\n        this.onPenSelected(pen);\r\n    }\r\n\r\n    onPenSelected(pen) { }\r\n}\r\n\r\nmodule.exports = Toolbar;","const { Pen, PenType, PRIMARY_BUTTON, SECUNDARY_BUTTON } = require(\"./pen\");\r\n\r\nclass SelectorPen extends Pen {\r\n    constructor(name, icon, size = undefined, color = undefined, bgColor = \"black\") {\r\n        super(PenType.selector, name, icon, size, color, bgColor);\r\n    }\r\n\r\n    handleEvents(event, context) {\r\n        if (\"pointerup\" == event.type) {\r\n            this.polyline.remove();\r\n\r\n            \r\n        } else if ((event.buttons & (PRIMARY_BUTTON | SECUNDARY_BUTTON)) > 0)\r\n            this.handlePenEvent(event);\r\n    }\r\n}\r\n\r\nmodule.exports = SelectorPen;","const { Pen, PenType, PRIMARY_BUTTON, ERASER_BUTTON } = require(\"./pen\");\r\n\r\nclass EraserPen extends Pen {\r\n    constructor(name, icon, size = undefined, color = undefined, bgColor = \"black\") {\r\n        super(PenType.eraser, name, icon, size, color, bgColor);\r\n    }\r\n\r\n    handleEvents(event, context) {\r\n        if ((event.buttons & (PRIMARY_BUTTON | ERASER_BUTTON)) == 0)\r\n            return;\r\n\r\n        let element = document.elementFromPoint(event.x, event.y);\r\n        if (element && element.parentElement === context.pad) {\r\n            element.remove();\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = EraserPen;","const { Pen, PenType, PRIMARY_BUTTON, SECUNDARY_BUTTON } = require(\"./pen\");\r\n\r\nclass StylusPen extends Pen {\r\n    constructor(name, icon, size = undefined, color = undefined, bgColor = \"black\") {\r\n        super(PenType.pen, name, icon, size, color, bgColor);\r\n    }\r\n\r\n    handleEvents(event, context) {\r\n        if (\"pointerenter\" == event.type) {\r\n            if (this.btnPressed)\r\n                this.createNewPolyline();\r\n        } else if (\"pointermove\" == event.type) {\r\n            if (this.btnPressed && event.target === this.pad) {\r\n                this.linePoints.push([event.offsetX, event.offsetY]);\r\n\r\n                this.polyline.setAttribute(\"points\", this\r\n                    .linePoints\r\n                    .map(v => v[0] + \",\" + v[1])\r\n                    .join(\" \"));\r\n            }\r\n        } else if (\"pointerdown\" == event.type) {\r\n            this.btnPressed = event.buttons > 0;\r\n            if (this.btnPressed)\r\n                this.createNewPolyline();\r\n        } else if (\"pointerup\" == event.type) {\r\n            this.btnPressed = event.buttons > 0;\r\n            this.endPolyline();\r\n        } else if (\"pointerleave\" == event.type) {\r\n            this.btnPressed = false;\r\n            this.endPolyline();\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = StylusPen;","const { PenType,\r\n    PRIMARY_BUTTON, ERASER_BUTTON, SECUNDARY_BUTTON,\r\n    EraserPen, SelectionPen } = require('./pens/index');\r\n\r\nclass DrawingPad {\r\n    constructor(toolbar, pad) {\r\n        this.toolbar = toolbar;\r\n        this.pad = pad;\r\n        this.btnPressed = false;\r\n        this.eventTypes = [\r\n            \"pointerover\",\r\n            \"pointerenter\",\r\n            \"pointerdown\",\r\n            \"pointermove\",\r\n            \"pointerup\",\r\n            \"pointercancel\",\r\n            \"pointerout\",\r\n            \"pointerleave\",\r\n        ];\r\n        this.eventListeners = {};\r\n\r\n        this.currentPen = this.toolbar.getSelectedPen();\r\n        this.previousPen = undefined;\r\n    }\r\n\r\n    init() {\r\n        this.registerListeners();\r\n        this.toolbar.onPenSelected = (pen) => this.setCurrentPen(pen);\r\n    }\r\n\r\n    setCurrentPen(pen) {\r\n        this.currentPen = pen;\r\n    }\r\n\r\n    registerListeners() {\r\n        this.eventTypes.forEach((eventType) => {\r\n            let eventListener = event => this.handleEvents(event);\r\n            this.pad.addEventListener(eventType, eventListener);\r\n            this.eventListeners[eventType] = eventListener;\r\n        });\r\n    }\r\n\r\n    removeListeners() {\r\n        this.eventTypes.forEach(eventType => {\r\n            this.pad.removeEventListener(eventType, this.eventListeners[eventType]);\r\n        });\r\n    }\r\n\r\n    handleEvents(event) {\r\n        if (event.pointerType != \"pen\")\r\n            return;\r\n\r\n        event.stopPropagation();\r\n\r\n        console.log(event.type + \" \" + event.target.tagName + \" \" + event.buttons);\r\n\r\n        // when we are in painting mode but button is ERASER_BUTTON we erase instead of paint\r\n        if (\"pointerdown\" == event.type) {\r\n            if (this.currentPen.penType == PenType.pen) {\r\n                if ((event.buttons & ERASER_BUTTON) > 0) {\r\n                    this.previousPen = this.currentPen;\r\n                    this.setCurrentPen(EraserPen);\r\n                } else if ((event.buttons & SECUNDARY_BUTTON) > 0) {\r\n                    this.previousPen = this.currentPen;\r\n                    this.setCurrentPen(SelectionPen);\r\n                }\r\n            }\r\n        }\r\n\r\n        this.currentPen.handleEvents(event, this);\r\n\r\n        if (\"pointerup\" == event.type) {\r\n            if (this.previousPen) {\r\n                this.setCurrentPen(this.previousPen);\r\n                this.previousPen = undefined;\r\n            }\r\n        }\r\n    }\r\n\r\n    endPolyline() {\r\n        this.linePoints = [];\r\n    }\r\n\r\n    createNewPolyline() {\r\n        this.linePoints = [];\r\n\r\n        this.polyline = document.createElementNS('http://www.w3.org/2000/svg', \"polyline\");\r\n        this.polyline.setAttribute(\"fill\", \"none\");\r\n        this.polyline.setAttribute(\"stroke\", this.currentPen.color);\r\n        this.polyline.setAttribute(\"stroke-width\", this.currentPen.size);\r\n        this.polyline.setAttribute(\"stroke-linecap\", \"round\");\r\n        this.pad.appendChild(this.polyline);\r\n    }\r\n}\r\n\r\nmodule.exports = DrawingPad;"],"sourceRoot":""}