var DrawNotes=function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){const n=Object.freeze({eraser:"eraser",pen:"pen",selector:"selector"});e.exports={PRIMARY_BUTTON:1,SECUNDARY_BUTTON:2,ERASER_BUTTON:32,PenType:n,Pen:class{constructor(e,t,n,s,r,i="black"){this.penType=e,this.name=t,this.icon=n,this.size=s,this.color=r,this.bgColor=i}handleEvents(e,t){throw new Error("Must be overridden")}}}},function(e,t,n){const s=n(4),r=n(5),i=n(6),o=new i("black pen","create.svg",2,"black","white"),l=new r("eraser","delete.svg"),c=new s("select","select.svg",2,"gray"),p=[c,r,o,new i("white pen","create.svg",2,"white"),new i("green pen","create.svg",2,"green"),new i("red pen","create.svg",2,"red"),new i("blue pen","create.svg",2,"blue","white")];e.exports={InitialPen:o,EraserPen:l,SelectionPen:c,Pens:p}},function(e,t,n){const s=n(3),r=n(7);e.exports=class{constructor(e,t){this.toolbar=new s(e),this.pad=new r(this.toolbar,t)}init(){this.toolbar.init(),this.pad.init()}}},function(e,t,n){const{InitialPen:s,Pens:r}=n(1);e.exports=class{constructor(e){this.toolbar=e,this.selectedPen=s,this.selectedDiv=void 0}init(){r.forEach(e=>{let t=document.createElement("div");this.toolbar.appendChild(t);let n=document.createElement("img");t.appendChild(n);let s=document.createElement("p");t.appendChild(s),t.onclick=n=>{this.selectedDiv.classList.remove("selected-pen"),this.selectedDiv=t,t.classList.add("selected-pen"),this.setSelectedPen(e)},e===this.selectedPen&&(this.selectedDiv=t,t.classList.add("selected-pen")),n.src="icon/"+e.icon,t.classList.add("pen"),s.style.backgroundColor=e.color,s.style.color=e.bgColor,s.textContent=e.name})}getSelectedPen(){return this.selectedPen}setSelectedPen(e){this.selectedPen=e,this.onPenSelected(e)}onPenSelected(e){}}},function(e,t,n){const{Pen:s,PenType:r,PRIMARY_BUTTON:i,SECUNDARY_BUTTON:o}=n(0);e.exports=class extends s{constructor(e,t,n,s,i="black"){super(r.selector,e,t,n,s,i)}handleEvents(e,t){"pointerup"==e.type?this.polyline.remove():(e.buttons&(i|o))>0&&this.handlePenEvent(e)}}},function(e,t,n){const{Pen:s,PenType:r,PRIMARY_BUTTON:i,ERASER_BUTTON:o}=n(0);e.exports=class extends s{constructor(e,t,n,s,i="black"){super(r.eraser,e,t,n,s,i)}handleEvents(e,t){if(0==(e.buttons&(i|o)))return;let n=document.elementFromPoint(e.x,e.y);n&&n.parentElement===t.pad&&n.remove()}}},function(e,t,n){const{Pen:s,PenType:r,PRIMARY_BUTTON:i,SECUNDARY_BUTTON:o}=n(0);e.exports=class extends s{constructor(e,t,n,s,i="black"){super(r.pen,e,t,n,s,i)}handleEvents(e,t){"pointerenter"==e.type?this.btnPressed&&this.createNewPolyline():"pointermove"==e.type?this.btnPressed&&e.target===this.pad&&(this.linePoints.push([e.offsetX,e.offsetY]),this.polyline.setAttribute("points",this.linePoints.map(e=>e[0]+","+e[1]).join(" "))):"pointerdown"==e.type?(this.btnPressed=e.buttons>0,this.btnPressed&&this.createNewPolyline()):"pointerup"==e.type?(this.btnPressed=e.buttons>0,this.endPolyline()):"pointerleave"==e.type&&(this.btnPressed=!1,this.endPolyline())}}},function(e,t,n){const{PenType:s,PRIMARY_BUTTON:r,ERASER_BUTTON:i,SECUNDARY_BUTTON:o,EraserPen:l,SelectionPen:c}=n(1);e.exports=class{constructor(e,t){this.toolbar=e,this.pad=t,this.btnPressed=!1,this.eventTypes=["pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave"],this.eventListeners={},this.currentPen=this.toolbar.getSelectedPen(),this.previousPen=void 0}init(){this.registerListeners(),this.toolbar.onPenSelected=e=>this.setCurrentPen(e)}setCurrentPen(e){this.currentPen=e}registerListeners(){this.eventTypes.forEach(e=>{let t=e=>this.handleEvents(e);this.pad.addEventListener(e,t),this.eventListeners[e]=t})}removeListeners(){this.eventTypes.forEach(e=>{this.pad.removeEventListener(e,this.eventListeners[e])})}handleEvents(e){"pen"==e.pointerType&&(e.stopPropagation(),console.log(e.type+" "+e.target.tagName+" "+e.buttons),"pointerdown"==e.type&&this.currentPen.penType==s.pen&&((e.buttons&i)>0?(this.previousPen=this.currentPen,this.setCurrentPen(l)):(e.buttons&o)>0&&(this.previousPen=this.currentPen,this.setCurrentPen(c))),this.currentPen.handleEvents(e,this),"pointerup"==e.type&&this.previousPen&&(this.setCurrentPen(this.previousPen),this.previousPen=void 0))}endPolyline(){this.linePoints=[]}createNewPolyline(){this.linePoints=[],this.polyline=document.createElementNS("http://www.w3.org/2000/svg","polyline"),this.polyline.setAttribute("fill","none"),this.polyline.setAttribute("stroke",this.currentPen.color),this.polyline.setAttribute("stroke-width",this.currentPen.size),this.polyline.setAttribute("stroke-linecap","round"),this.pad.appendChild(this.polyline)}}}]);
//# sourceMappingURL=draw-notes.js.map